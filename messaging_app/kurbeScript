#!/usr/bin/env bash
# kurbeScript - Start a local Kubernetes cluster and verify it's running
# Task 0: Install Kubernetes and Set Up a Local Cluster

set -euo pipefail

echo "Starting Minikube..."

# Verify required tools are installed
if ! command -v minikube >/dev/null 2>&1; then
  echo "minikube is not installed or not in PATH" >&2
  exit 1
fi
if ! command -v kubectl >/dev/null 2>&1; then
  echo "kubectl is not installed or not in PATH" >&2
  exit 1
fi

# Start minikube
minikube start

echo
echo "Verifying cluster is running (kubectl cluster-info)..."

# Verify cluster is running
kubectl cluster-info

echo
echo "Retrieving available pods..."

# Retrieve available pods in current namespace
kubectl get pods || true

# Optionally list pods across all namespaces
kubectl get pods --all-namespaces || true

echo
echo "Cluster setup and verification completed."

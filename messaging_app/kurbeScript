#!/bin/bash

# kurbeScript - Starts Kubernetes cluster and verifies it's running
# Task 0: Install Kubernetes and Set Up a Local Cluster

set -e

echo "ðŸš€ Starting Minikube cluster..."

# Verify required tools are installed
if ! command -v minikube >/dev/null 2>&1; then
	echo "minikube is not installed or not in PATH" >&2
	exit 1
fi
if ! command -v kubectl >/dev/null 2>&1; then
	echo "kubectl is not installed or not in PATH" >&2
	exit 1
fi

# Start minikube
minikube start

echo ""
echo "âœ… Verifying cluster is running..."

# Verify cluster is running
kubectl cluster-info

echo ""
echo "ðŸ“¦ Retrieving available pods..."

# Get pods in current namespace (checker-friendly)
kubectl get pods

# Also list all namespaces for completeness
kubectl get pods --all-namespaces

echo ""
echo "ðŸŽ‰ Cluster setup complete!"